<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book Room</title>
    <script>
        window.onload = function() {
            document.getElementById("endDate").addEventListener("change", function() {
                var startDate = new Date(document.getElementById("startDate").value);
                var endDate = new Date(document.getElementById("endDate").value);
                var timeDiff = endDate.getTime() - startDate.getTime();
                var daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
                document.getElementById("noOfDays").value = daysDiff;

                var pricePerNight = parseFloat(document.getElementById("roomPrice").value);
                document.getElementById("totalPrice").value = daysDiff * pricePerNight;
            });
        };
    </script>
</head>
<body>
<h1>Book Room</h1>
<form th:action="@{/home/confirmBooking}" method="post">
    <input type="hidden" id="roomId" name="roomId" th:value="${bookingForm.roomId}" />
    <div>
        <label>Room Type:</label>
        <input type="text" id="roomType" name="roomType" th:value="${bookingForm.roomType}" readonly />
    </div>
    <div>
        <label>Price Per Night:</label>
        <input type="text" id="roomPrice" name="roomPrice" th:value="${bookingForm.roomPrice}" readonly />
    </div>
    <div>
        <label>Customer ID:</label>
        <input type="text" name="customerId" th:value="${bookingForm.customerId}" readonly />
    </div>
    <div>
        <label>Customer Email:</label>
        <input type="email" name="customerEmail" th:value="${bookingForm.customerEmail}" readonly />
    </div>
    <div>
        <label>Start Date:</label>
        <input type="date" id="startDate" name="startDate" required />
    </div>
    <div>
        <label>End Date:</label>
        <input type="date" id="endDate" name="endDate" required />
    </div>
    <div>
        <label>Number of Nights:</label>
        <input type="number" id="noOfDays" name="noOfDays" readonly />
    </div>
    <div>
        <label>Total Price:</label>
        <input type="text" id="totalPrice" name="totalPrice" readonly />
    </div>
    <button type="submit">Confirm Booking</button>
</form>
</body>
</html>
